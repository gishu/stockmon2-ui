<h3>Trades</h3>



<mat-card>

  <mat-card-header>
    <mat-card-title class='text-info'>Enter new trades</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form novalidate #tradeForm='ngForm' (ngSubmit)='addTrade()'>
      <div class="form-row">
        <div class="form-group col-md-12">
          <label for='typeField'>Type</label>
          <mat-radio-group [(ngModel)]='trade.isBuy' name='isBuy'>
            <mat-radio-button *ngFor='let type of tradeTypes' [value]='type.value'  class='mannKaRadio'>{{type.label}}</mat-radio-button>
          </mat-radio-group>

        </div>
      </div>

      <div class='form-row'>

        <div class="form-group col-md-6">
          <label for='stockField'>Stock</label>

          <mat-form-field>
            <input id='stockField' class='form-control' matInput required type="text" placeholder="kya liya" [matAutocomplete]='stockAuto'
              [(ngModel)]='trade.stock' (ngModelChange)='onStockChange($event)' name='stock' #stockModel='ngModel'>
            <mat-autocomplete #stockAuto='matAutocomplete'>
              <mat-option *ngFor='let stock of filteredStocks' [value]='stock'>{{stock}}</mat-option>
            </mat-autocomplete>
            <mat-error *ngIf='!stockModel.valid'>Stock name is required</mat-error>
          </mat-form-field>

        </div>
        <div class="form-group col-md-6">
          <label for='dateField'>Date</label>

          <mat-form-field>
            <input matInput id='dateField' class='form-control' [matDatepicker]="picker" placeholder="kab liya" [(ngModel)]='trade.date'
              name='date'>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker [startAt]="trade.date" touchUi='true'></mat-datepicker>
          </mat-form-field>

        </div>
      </div>


      <div class="form-row">
        <div class="form-group col-md-4">
          <label for="qtyField">Quantity</label>
          <mat-form-field class='st3-num-field'>
            <input matInput id='qtyField' type="number" class="form-control" [(ngModel)]='trade.qty' name='qty'>
          </mat-form-field>
        </div>

        <div class="form-group col-md-4">
          <label for="priceField">Price</label>
          <mat-form-field class='st3-num-field'>
            <input matInput id='priceField' type="number" class="form-control text-right" [(ngModel)]='trade.price' name='price'>
          </mat-form-field>
        </div>

        <div class="form-group col-md-4 ">
          <label for="brokerageField">Brokerage</label>
          <mat-form-field class='st3-num-field'>
            <input matInput id='brokerageField' type="number" class="form-control text-right" [(ngModel)]='trade.brokerage' name='brokerage'>
          </mat-form-field>
        </div>

      </div>

      <div class="form-row">
        <div class="form-group col-md-4 ">
          <label for="amountField">Amount</label>
          <mat-form-field class='st3-num-field'>
            <input matInput id='amountField' type="number" class="form-control text-right" [disabled]=true [ngModel]='trade.amount()'
              name='amount'>
          </mat-form-field>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group col-md-6">
          <mat-form-field id='matFormFieldNotes'>
            <textarea matInput id='notesField' type="text" class="form-control" placeholder='Notes' [(ngModel)]='trade.notes' name='notes'></textarea>
          </mat-form-field>

        </div>
      </div>

      <div class="form-row">
        <span class="col-md-5"></span>
        <button mat-raised-button class='col-md-2' color='primary' type='submit' [disabled]='!tradeForm.valid'>Add</button>
        <span class="col-md-5"></span>

      </div>
    </form>
  </mat-card-content>

</mat-card>

<mat-table [dataSource]='dataSource' #table>
  <ng-container matColumnDef="type">
    <mat-header-cell *matHeaderCellDef> Type </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.isBuy ? 'B' : 'S'}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="date">
    <mat-header-cell *matHeaderCellDef> Date </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.date | date:mediumDate}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="stock">
    <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.stock}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="qty">
    <mat-header-cell *matHeaderCellDef> Qty </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.qty}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="price">
    <mat-header-cell *matHeaderCellDef> Price </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.price | number:'1.2'}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="brokerage">
    <mat-header-cell *matHeaderCellDef> Brok. </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.brokerage | number:'1.2'}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="amount">
    <mat-header-cell *matHeaderCellDef> Amount </mat-header-cell>
    <mat-cell *matCellDef="let trade"> {{trade.amount() | number:'1.2'}} </mat-cell>
  </ng-container>


  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
</mat-table>

<button mat-raised-button color='primary' (click)='saveTrades()'>Save</button>
